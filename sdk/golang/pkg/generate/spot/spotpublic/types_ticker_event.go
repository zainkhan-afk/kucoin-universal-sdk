// Code generated by Kucoin Universal SDK Generator; DO NOT EDIT.

package spotpublic

import (
	"encoding/json"
	"github.com/Kucoin/kucoin-universal-sdk/sdk/golang/pkg/types"
)

// TickerEvent struct for TickerEvent
type TickerEvent struct {
	// common response
	CommonResponse *types.WsMessage
	// Sequence number
	Sequence string `json:"sequence,omitempty"`
	// Last traded price
	Price string `json:"price,omitempty"`
	// Last traded amount
	Size string `json:"size,omitempty"`
	// Best ask price
	BestAsk string `json:"bestAsk,omitempty"`
	// Best ask size
	BestAskSize string `json:"bestAskSize,omitempty"`
	// Best bid price
	BestBid string `json:"bestBid,omitempty"`
	// Best bid size
	BestBidSize string `json:"bestBidSize,omitempty"`
	// The matching time of the latest transaction
	Time int64 `json:"Time,omitempty"`
}

// NewTickerEvent instantiates a new TickerEvent object
// This constructor will assign default values to properties that have it defined
func NewTickerEvent(sequence string, price string, size string, bestAsk string, bestAskSize string, bestBid string, bestBidSize string, time int64) *TickerEvent {
	this := TickerEvent{}
	this.Sequence = sequence
	this.Price = price
	this.Size = size
	this.BestAsk = bestAsk
	this.BestAskSize = bestAskSize
	this.BestBid = bestBid
	this.BestBidSize = bestBidSize
	this.Time = time
	return &this
}

// NewTickerEventWithDefaults instantiates a new TickerEvent object
// This constructor will only assign default values to properties that have it defined,
func NewTickerEventWithDefaults() *TickerEvent {
	this := TickerEvent{}
	return &this
}

func (o *TickerEvent) ToMap() map[string]interface{} {
	toSerialize := map[string]interface{}{}
	toSerialize["sequence"] = o.Sequence
	toSerialize["price"] = o.Price
	toSerialize["size"] = o.Size
	toSerialize["bestAsk"] = o.BestAsk
	toSerialize["bestAskSize"] = o.BestAskSize
	toSerialize["bestBid"] = o.BestBid
	toSerialize["bestBidSize"] = o.BestBidSize
	toSerialize["Time"] = o.Time
	return toSerialize
}

type TickerEventCallback func(topic string, subject string, data *TickerEvent) error

type TickerEventCallbackWrapper struct {
	callback TickerEventCallback
}

func (w *TickerEventCallbackWrapper) OnMessage(msg *types.WsMessage) error {
	obj := &TickerEvent{}
	err := json.Unmarshal(msg.RawData, obj)
	if err != nil {
		return err
	}
	obj.CommonResponse = msg
	return w.callback(msg.Topic, msg.Subject, obj)
}
